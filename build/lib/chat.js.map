{"version":3,"sources":["../../lib/chat.js"],"names":[],"mappings":";;;AACA,MAAI,MAAJ,EAAY;;AAEV,WAAO,MAAP,GAAgB,SAAS,cAAT,CAAwB,MAAxB,CAAhB;;;AAFU,QAKN,WAAW,SAAS,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,CAAX,CALM;AAMV,aAAS,gBAAT,CAA0B,QAA1B,EAAoC,UAAU,KAAV,EAAiB;;AAEnD,UAAI,OAAO,SAAS,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,CAAP,CAF+C;;AAInD,aAAO,KAAP,CAAa,EAAC,MAAM,MAAN,EAAc,SAAS,KAAK,KAAL,EAArC,EAJmD;AAKnD,WAAK,KAAL,GAAa,EAAb,CALmD;;AAOnD,YAAM,cAAN,GAPmD;KAAjB,CAApC;;;AANU,QAkBN,WAAW,SAAS,sBAAT,CAAgC,MAAhC,EAAwC,CAAxC,CAAX,CAlBM;AAmBV,YAAQ,gBAAR,CAAyB,SAAzB,EAAoC,UAAU,KAAV,EAAiB;;AAEnD,UAAI,UAAU,SAAS,aAAT,CAAuB,GAAvB,CAAV,CAF+C;AAGnD,UAAI,UAAU,SAAS,aAAT,CAAuB,MAAvB,CAAV,CAH+C;AAIjD,cAAQ,WAAR,GAAsB,MAAM,OAAN,CAJ2B;AAKnD,cAAQ,SAAR,GAAoB,aAAa,OAAO,MAAM,IAAN,CAApB,GAAkC,aAAlC,CAL+B;AAMnD,cAAQ,WAAR,CAAoB,OAApB,EANmD;;AAQnD,eAAS,WAAT,CAAqB,OAArB,EARmD;;AAUnD,UAAI,MAAM,KAAN,IAAe,IAAf,IAAuB,KAAK,cAAL,CAAoB,MAAM,KAAN,CAA3C,EAAyD;AAC3D,aAAK,cAAL,CAAoB,MAAM,KAAN,CAApB,CAAiC,IAAjC,CAAsC,WAAtC,GAAoD,MAAM,OAAN,CADO;OAA7D;KAVkC,CAApC,CAnBU;GAAZ,MAmCO;;;AAGL,YAAQ,gBAAR,CAAyB,MAAzB,EAAiC,UAAU,KAAV,EAAiB;;AAEhD,aAAO,KAAP,CAAa;AACX,cAAM,MAAM,KAAN,CAAY,IAAZ;AACN,eAAO,MAAM,KAAN,CAAY,KAAZ;AACP,cAAM,SAAN;AACA,iBAAS,MAAM,OAAN;OAJX,EAFgD;KAAjB,CAAjC,CAHK;GAnCP","file":"chat.js","sourcesContent":["\nif (CLIENT) {\n\n  global.canvas = document.getElementById('game');\n\n  // Sending a chat\n  var chatForm = document.getElementsByClassName('chat-form')[0];\n  chatForm.addEventListener('submit', function (event) {\n\n    var text = chatForm.getElementsByClassName('chat-text')[0];\n\n    primus.write({type: 'chat', message: text.value});\n    text.value = \"\";\n\n    event.preventDefault();\n\n  });\n\n  // Adding chats to the Log\n  var chatList = document.getElementsByClassName('chat')[0];\n  network.addEventListener('receive', function (event) {\n\n    var listing = document.createElement('p');\n    var message = document.createElement('span');\n      message.textContent = event.message;\n    listing.innerHTML = '<strong>' + escape(event.name) + ' </strong> ';\n    listing.appendChild(message);\n\n    chatList.appendChild(listing);\n\n    if (event.entId && game && game.findEntityById(event.entId)) {\n      game.findEntityById(event.entId).name.textContent = event.message;\n    }\n\n  });\n\n} else {\n\n  // On receive chat, send it out\n  network.addEventListener('chat', function (event) {\n\n    primus.write({\n      name: event.spark.name,\n      entId: event.spark.entId,\n      type: 'receive',\n      message: event.message\n    });\n\n  })\n\n}"]}